<!-- src/app/app.component.html -->
<div class="container">
  <h1>Gestión de Playlists</h1>

  <div *ngIf="message" class="message" [ngClass]="{ 'message-success': messageType === 'success', 'message-error': messageType === 'error' }">{{ message }}</div>

  <!-- Formulario para Crear Nueva Playlist -->
  <div class="card">
    <h2>Crear Nueva Playlist</h2>
    <form (ngSubmit)="createPlaylist()">
      <div class="form-group">
        <label for="playlistName">Nombre:</label>
        <input type="text" id="playlistName" [(ngModel)]="newPlaylist.name" name="playlistName" required>
      </div>
      <div class="form-group">
        <label for="playlistDescription">Descripción:</label>
        <input type="text" id="playlistDescription" [(ngModel)]="newPlaylist.description" name="playlistDescription">
      </div>

      <h3>Añadir Canciones</h3>
      <div class="form-inline">
        <input type="text" [(ngModel)]="newSong.title" name="newSongTitle" placeholder="Título de la Canción" required>
        <input type="text" [(ngModel)]="newSong.artist" name="newSongArtist" placeholder="Artista" required>
        <input type="text" [(ngModel)]="newSong.album" name="newSongAlbum" placeholder="Álbum (opcional)">
        <input type="number" [(ngModel)]="newSong.year" name="newSongYear" placeholder="Año (opcional)">
        <input type="text" [(ngModel)]="newSong.genre" name="newSongGenre" placeholder="Género (opcional)">
        <button type="button" (click)="addSongToNewPlaylist()">Añadir Canción</button>
      </div>

      <div *ngIf="newPlaylist.songs && newPlaylist.songs.length > 0">
        <h4>Canciones a Añadir:</h4>
        <ul>
          <li *ngFor="let song of newPlaylist.songs">
            {{ song.title }} - {{ song.artist }}
          </li>
        </ul>
      </div>

      <button type="submit" class="button primary">Crear Playlist</button>
    </form>
  </div>

  <!-- Card para Acciones: Buscar, Eliminar, Recargar -->
  <div class="card">
    <h2>Acciones de Playlist</h2>

    <!-- Recargar Todas -->
    <div class="form-group">
      <label>Refrescar la lista completa de playlists</label>
      <button type="button" (click)="getAllPlaylists()" class="button primary">Cargar Todas</button>
    </div>

    <hr class="divider">

    <!-- Buscar por Nombre -->
    <div class="form-group">
      <label for="searchName">Buscar Playlist por Nombre:</label>
      <form (ngSubmit)="findPlaylist()" class="form-inline">
        <input type="text" id="searchName" [(ngModel)]="searchName" name="searchName" placeholder="Nombre de la playlist">
        <button type="submit" class="button">Buscar</button>
      </form>
    </div>

    <!-- Resultado de la Búsqueda -->
    <div *ngIf="searchedPlaylist" class="search-result">
      <h4>Resultado de la Búsqueda:</h4>
      <div class="playlist-item">
        <h3>{{ searchedPlaylist.name }}</h3>
        <p>{{ searchedPlaylist.description }}</p>
        <ul *ngIf="searchedPlaylist.songs && searchedPlaylist.songs.length > 0">
          <li *ngFor="let song of searchedPlaylist.songs">
            {{ song.title }} - {{ song.artist }} ({{ song.album || 'N/A' }}, {{ song.year || 'N/A' }}, {{ song.genre || 'N/A' }})
          </li>
        </ul>
      </div>
    </div>

    <hr class="divider">

    <!-- Eliminar por Nombre -->
    <div class="form-group">
      <label for="deleteName">Eliminar Playlist por Nombre:</label>
      <form (ngSubmit)="deletePlaylistByName()" class="form-inline">
        <input type="text" id="deleteName" [(ngModel)]="deleteName" name="deleteName" placeholder="Nombre a eliminar">
        <button type="submit" class="button danger">Eliminar</button>
      </form>
    </div>
  </div>

  <!-- Lista de Playlists Existentes -->
  <div class="card">
    <h2>Playlists Existentes</h2>
    <div *ngIf="playlists.length === 0">No hay playlists para mostrar.</div>
    <ul class="playlist-list">
      <li *ngFor="let playlist of playlists" class="playlist-item">
        <h3>{{ playlist.name }}</h3>
        <p>{{ playlist.description }}</p>
        <div *ngIf="playlist.songs && playlist.songs.length > 0">
          <h4>Canciones:</h4>
          <ul>
            <li *ngFor="let song of playlist.songs">
              {{ song.title }} - {{ song.artist }} ({{ song.album || 'N/A' }}, {{ song.year || 'N/A' }}, {{ song.genre || 'N/A' }})
            </li>
          </ul>
        </div>
        <button class="button danger" (click)="deletePlaylist(playlist.name)">Eliminar</button>
      </li>
    </ul>
  </div>
</div>
